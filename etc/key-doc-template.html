<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Key Document</title>
        <link rel="stylesheet" href="${_CSS_PATH}">
        ${_CSS_OVERRIDE}
    </head>
    <body>

        <img src="${_LOGO_PATH}" alt="logo">
        <br>
        <br>
        <p>${_GREETING}</p>

        <p>This document contains a “private key” that can unlock files encrypted with the associated
            public key. This document is intended as a backup and <strong>must</strong> be kept in a safe place. It contains
            instructions for using the (private) key to unlock a file — these instructions are a bit technical, so it includes
            some ways to get help if needed.</p>

        <p>Know that the key <em>itself</em> is locked, so it <strong>cannot</strong> be used without the passphrase used to
            create it. ${_PASSPHRASE_LOCATION}</p>

        <p>Welcome to the modern world of digital security.</p>

        <p>If all of this has you thinking <em>"uh… what?"</em>, please see <a href="#getting-help">Getting Help</a>.</p>

        <div class="closing">${closing}</div>
        <div class="signature">${author}</div>

        <div class="page-break"></div>

        <h1 id="getting-help">Getting Help</h1>

        <p>The following are contacts that I trust and who have agreed to help if needed:</p>

        <ol>
            ${_CONTACTS_LIST}
        </ol>

        <p>If they aren't available, don't worry – there are people out there who can help you through this process.
            Since what you're trying to decrypt may be extremely sensitive (e.g. a password manager backup), you need
            to be careful about who you trust and how you get help...</p>

        <div class="getting-help">
            <h2>Finding Help</h2>

            <h3>Your Best Options: In-Person Help</h3>

            <p><strong>Friends or Family in Tech:</strong> Think about anyone in your network who works with computers
                professionally – software developers, IT support, network administrators, or even tech-savvy relatives. They might
                be willing to help, and you already know them personally.</p>

            <p><strong>Local Computer Repair Shops:</strong> This is probably your best bet. Most towns have at least one computer
                repair shop, and many of their technicians know their way around the Mac Terminal. When you call, you can say
                something like: "I need help following some written instructions to use Terminal commands on my Mac. It involves
                decrypting a very sensitive file, so I need someone who can work on this in person and agrees not to keep any
                copies of my files or information."</p>

            <p><strong>Apple Store Genius Bar:</strong> While Apple support might not help with the actual decryption, they can
                definitely help you get comfortable with opening Terminal and understanding basic navigation. Make an appointment
                and explain that you need to learn some basic Terminal commands for accessing your own files.</p>

            <p><strong>Local College IT Departments:</strong> If you have a community college or university nearby, their IT
                support staff are usually knowledgeable and trustworthy. You might be able to arrange a consultation where they
                walk you through the process.</p>

            <h3>Community Resources</h3>

            <p><strong>Library Technology Centers:</strong> Many public libraries have tech help sessions or staff who assist with
                computer problems. While they might not know the specific commands, they can help you get comfortable with the
                basics.</p>

            <p><strong>Senior Centers or Community Centers:</strong> If you're looking for a comfortable, non-intimidating
                environment, these often have volunteer tech helpers who are patient and understanding.</p>

            <div class="page-break"></div>

            <h3>Last Resort: Online Help</h3>

            <div class="callout callout-warning">
                <!--                <div class="callout-title">-->
                <!--                    <span class="callout-label">⚠️ Last Resort Only</span>-->
                <!--                </div>-->
                <p><strong>Only if you absolutely cannot find in-person help</strong>, you might consider freelance platforms
                    like Upwork or Fiverr. But please understand – this is risky because you're dealing with your password manager
                    backup. If you go this route:</p>
                <ul>
                    <li>Never, ever share your actual files or private keys</li>
                    <li>Only ask for general guidance on the process</li>
                    <li>Work with someone who has excellent reviews and a long track record</li>
                    <li>Consider having them walk you through the steps over video call rather than doing the work themselves</li>
                </ul>
            </div>

            <h3>What to Say to Anyone Helping You</h3>

            <p>Here's some language you can use to protect yourself:</p>

            <div class="callout callout-quote">
                <div class="callout-title">
                    <span class="callout-label">Friends and family</span>
                </div>

                <p>“I need your help unlocking a really sensitive file. Before we get started, I just want to ask that you don’t
                    make any copies, take screenshots, or save anything from this session. It has deeply personal information, and
                    I’m trusting you to keep it completely private. I really appreciate your help.”</p>

                <div class="callout-title">
                    <span class="callout-label">Professionals</span>
                </div>

                <p>"I need help with a very sensitive file decryption. Before we start, I need your agreement that you will not
                    make any copies of my files, take screenshots, or retain any information from this session. The file contains
                    extremely sensitive personal data, and I need your word that everything stays confidential and nothing gets
                    saved to your system."</p>

                <span class="callout-label">Professionals should understand completely and agree without hesitation.</span>
            </div>

            <div class="page-break"></div>

            <h3>Red Flags – When to Walk Away</h3>
            <div class="callout callout-danger">
                <p><strong>Trust your instincts.</strong> If someone:</p>
                <ul>
                    <li>Asks to take your computer home or work on it remotely</li>
                    <li>Wants to copy your files "for backup purposes"</li>
                    <li>Seems evasive about confidentiality agreements</li>
                    <li>Pressures you to rush through the process</li>
                    <li>Asks too many questions about what's in the encrypted file</li>
                </ul>
                <p>Just politely decline and find someone else.</p>
            </div>

            <h3>A Final Thought</h3>

            <p>Remember, you're not asking for anything unreasonable. Plenty of people know how to use Terminal commands, and most
                will be happy to help you follow written instructions. The key is finding someone trustworthy who respects the
                sensitive nature of what you're working with. Take your time, and don't settle for help that doesn't feel
                right.</p>
        </div>

        <div class="page-break"></div>

        <h1 id="instructions">Instructions</h1>

        <h2>Paper Key</h2>

        <p>Hopefully you have the key in digital form, perhaps on a USB drive or in a file. If you don't, this section has two
        forms of backup. Both the QR code and "<code>.pem</code>" formatted text below contain the <em>encrypted</em>
        <code>age</code> public key pair. Both should be converted to a text file by using your phone and
        sending the result to your computer then saving it as a file.</p>

        <p>To use the QR code, just open the camera app on your phone and point it at the image. You should see
            the same text as below (maybe just the beginning).</p>

        <p>If that fails, try scanning the text below it. If you don't know how, search the web for "scan text on phone".
            Worst case, you can always type it in by hand(!), including the leading and trailing lines, each of which begins
            and ends with 5 dashes.</p>

        <img src="${_QR_CODE_PATH}" alt="QR Code">

        <pre><code>${_ARMORED_KEY}</code></pre>

        <div class="page-break"></div>

        <h2>Prerequisites</h2>

        <p>Using the private key to decrypt a file requires the passphrase used when it was created. It is normally printed
            on the last page of this document, but it may be stored separately.</p>

        <p>You also need a command line tool that performs <a href="https://github.com/C2SP/C2SP/blob/main/age.md">age file
            encryption</a>:</p>

        <ul>
            <li><a href="https://github.com/str4d/rage">rage</a></li>
            <li><a href="https://github.com/FiloSottile/age">age</a></li>
        </ul>

        <p>The code used to create this document is a wrapper around <code>rage</code> and can also encrypt/decrypt files. The
            source code and instructions can be found at
            <a href="https://github.com/phoggy/valt">github.com/phoggy/valt</a>.</p>

        <p>There are other implementations to choose from <a href="https://github.com/FiloSottile/age">here</a>.</p>

        <h2>Decrypting A File</h2>

        <p>If you have <a href="https://nixos.org/download/">Nix</a> installed, the simplest way to decrypt is:</p>

        <pre><code>nix run github:phoggy/valt#recover -- decrypt -i YOUR_KEY_FILE ENCRYPTED_FILE</code></pre>

        <p>This downloads and runs the recovery tool automatically — no other software needs to be installed.</p>

        <p>Alternatively, if you have <code>rage</code> installed directly:</p>

        <pre><code>rage -d -i YOUR_KEY_FILE -o DECRYPTED_FILE ENCRYPTED_FILE</code></pre>

        <p>In both cases, you will be prompted for the passphrase that protects the private key.</p>

        <div class="page-break"></div>

        <h2>Passphrase</h2>

        <p>Here is the passphrase used when creating the key pair:</p>

        <div class="passphrase-box">
            ${_PHRASE}
        </div>

        <h2>Notes</h2>

        <div class="notes">
            ${_NOTES}
        </div>
    </body>
</html>
